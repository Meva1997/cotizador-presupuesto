(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function r(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(e){if(e.ep)return;e.ep=!0;const n=r(e);fetch(e.href,n)}})();function p(s,o,r="error"){const t=o.querySelector(".alerta-error, .alerta-exito");t&&t.remove();const e=document.createElement("div");e.classList.add("px-2","rounded","my-2","text-white","text-center"),r==="error"?e.classList.add("bg-red-500","border-red-800","alerta-error"):r==="exito"&&e.classList.add("bg-green-500","border-green-800","alerta-exito"),e.textContent=s,o.appendChild(e),setTimeout(()=>{e.remove()},1500)}const q=document.querySelector("#lista-gastos");function v(s){if(q.innerHTML="",s.length===0){const o=document.createElement("p");o.classList.add("text-center","my-3","text-gray-300"),o.textContent="No hay gastos agregados",q.appendChild(o);return}s.forEach(({cantidad:o,nombre:r,id:t})=>{const e=document.createElement("div");e.classList.add("bg-gray-200","text-white","p-2","rounded","my-2","mostrarGastos-div");const n=document.createElement("p");n.innerHTML=`<span class="font-bold text-xl text-black">Nombre del gasto:</span> <span class="text-black">${r}</span>`;const i=document.createElement("p");i.innerHTML=`<span class="text-red-600 font-semibold">Monto: $${o}</span>`;const u=document.createElement("button");u.classList.add("px-2","bg-blue-500","border-blue-800","rounded","text-white","transition","btn-editar","mr-2","hover:cursor-pointer","hover:bg-blue-700"),u.textContent="Editar",u.dataset.id=t,u.addEventListener("click",()=>{const h=document.querySelector("#form-2");h&&window.scrollTo({top:h.offsetTop-180,behavior:"smooth"})});const g=document.createElement("button");g.classList.add("px-2","bg-red-500","border-red-800","rounded","text-white","transition","btn-eliminar","hover:cursor-pointer","hover:bg-red-700"),g.textContent="Eliminar",g.dataset.id=t,e.appendChild(n),e.appendChild(i),e.appendChild(u),e.appendChild(g),q.appendChild(e)})}const $=document.querySelector("#lista-extra");function E(s){if($.innerHTML="",s.length===0){const o=document.createElement("p");o.classList.add("text-center","my-3","text-gray-300"),o.textContent="No hay ingresos agregados",$.appendChild(o);return}s.forEach(({cantidad:o,id:r},t)=>{const e=document.createElement("div");e.classList.add("bg-gray-200","text-white","p-2","rounded","my-2","mostrarExtras-div");const n=document.createElement("p");n.innerHTML=`<span class="font-bold text-lg text-black">${t===0?"Primer ingreso":"Ingreso Extra"}:</span> <span class="text-black">$${o}</span>`;const i=document.createElement("button");i.classList.add("px-2","bg-blue-500","border-blue-800","rounded","text-white","transition","btn-editar-extra","mr-2","hover:cursor-pointer","hover:bg-blue-700"),i.textContent="Editar",i.dataset.id=r,i.addEventListener("click",()=>{const g=document.querySelector("#form-1");g&&window.scrollTo({top:g.offsetTop-180,behavior:"smooth"})});const u=document.createElement("button");u.classList.add("px-2","bg-red-500","border-red-800","rounded","text-white","transition","btn-eliminar-extra","hover:cursor-pointer","hover:bg-red-700"),u.textContent="Eliminar",u.dataset.id=r,e.appendChild(n),e.appendChild(i),e.appendChild(u),$.appendChild(e)})}const S=document.querySelector("#presupuesto"),b=document.querySelector("#form-1"),m=document.querySelector("#form-2"),L=document.querySelector("#nombre-gasto"),I=document.querySelector("#dinero-gasto"),C=document.querySelector("#cantidad-inicial"),x=document.querySelector("#cantidad-restante"),G=document.querySelector("#div-restante"),k=document.querySelector("#btn-reiniciar"),D=document.querySelector("#lista-gastos"),T=document.querySelector("#lista-extra"),j=document.querySelector("#gastos-realizados"),A=document.querySelector("#dinero-agregado");b.addEventListener("submit",V);m.addEventListener("submit",H);k.addEventListener("click",R);let l=0,a=0,d=[],c=[],f=null;D.addEventListener("click",s=>{const o=s.target.getAttribute("data-id");s.target.classList.contains("btn-editar")&&(O(o,"gasto"),m.scrollIntoView({behavior:"smooth"}),L.focus()),s.target.classList.contains("btn-eliminar")&&P(o,"gasto")});T.addEventListener("click",s=>{const o=s.target.getAttribute("data-id");s.target.classList.contains("btn-editar-extra")&&(O(o,"ingreso"),b.scrollIntoView({behavior:"smooth"}),S.focus()),s.target.classList.contains("btn-eliminar-extra")&&P(o,"ingreso")});document.addEventListener("DOMContentLoaded",()=>{const s=JSON.parse(localStorage.getItem("gastos"))||[],o=JSON.parse(localStorage.getItem("ingresos"))||[];d=s,c=o,v(d),E(c),l=c.reduce((t,e)=>t+Number(e.cantidad),0);const r=d.reduce((t,e)=>t+Number(e.cantidad),0);a=l-r,C.textContent=`$${l}`,x.textContent=`$${a}`,a>0&&(m.style.display="flex")});function V(s){s.preventDefault();const o=parseFloat(S.value.trim());if(isNaN(o)||o<=0){p("Ingrese un número válido mayor a 0",b,"error");return}if(f){const r=c.find(g=>g.id===f);if(!r)return;const t=d.reduce((g,h)=>g+Number(h.cantidad),0),n=l-r.cantidad+o;if(n<t){p("No puedes disminuir este ingreso porque superas tus gastos actuales",b,"error");return}r.cantidad=o,l=n,a=l-t,C.textContent=`$${l}`,x.textContent=`$${a}`,w(),p("Editado Correctamente",b,"exito"),E(c),y();const i=document.querySelector(`#lista-extra [data-id="${f}"]`);i&&requestAnimationFrame(()=>{i.scrollIntoView({behavior:"smooth",block:"center"}),i.classList.add("resaltado"),setTimeout(()=>{i.classList.remove("resaltado")},1e3)}),f=null;const u=document.querySelector("#btn-submit-ingreso")||b.querySelector('button[type="submit"]');u&&(u.textContent="Calcular")}else{l+=o;const r=d.reduce((t,e)=>t+Number(e.cantidad),0);a=l-r,c.push({id:M(),cantidad:o}),w(),p("Agregado correctamente",b,"exito"),E(c),setTimeout(()=>{const t=document.querySelector(`#lista-extra [data-id="${c[c.length-1].id}"]`);t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.classList.add("resaltado"),setTimeout(()=>{t.classList.remove("resaltado")},1e3))},100)}if(C.textContent=`$${l}`,x.textContent=`$${a}`,S.value="",a>=0){m.style.display="flex";const r=document.querySelector(".mensaje-error-gasto");r&&r.remove()}y()}function H(s){if(s.preventDefault(),c.length<=0){m.style.display="none",p("Primero ingresa tu presupuesto",b,"error");return}else m.style.display="flex";const o=L.value.trim(),r=parseFloat(I.value.trim());if(o===""||r<=0||isNaN(r)){p("Campos de gasto incompletos o invalido",m,"error");return}if(f){const t=d.find(e=>e.id===f);if(t){const e=a+t.cantidad;if(r>e){p("El gasto excede tu dinero restante",m,"error");return}a+=t.cantidad,a-=r,t.nombre=o,t.cantidad=r,N(),v(d),setTimeout(()=>{const n=document.querySelector(`#lista-gastos [data-id="${f}"]`);n&&(n.scrollIntoView({behavior:"smooth",block:"center"}),n.classList.add("resaltado"),setTimeout(()=>{n.classList.remove("resaltado")},1e3))},100)}f=null,document.querySelector("#btn-submit").textContent="Calcular"}else a-=r,d.push({nombre:o,cantidad:r,id:M()}),y();x.textContent=`$${a}`,v(d),N(),p("Guardado correctamente",m,"exito"),setTimeout(()=>{const t=document.querySelector(`#lista-gastos [data-id="${d[d.length-1].id}"]`);t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.classList.add("resaltado"),setTimeout(()=>{t.classList.remove("resaltado")},1e3))},100),L.value="",I.value="",y()}function N(){localStorage.setItem("gastos",JSON.stringify(d))}function w(){localStorage.setItem("ingresos",JSON.stringify(c))}function O(s,o){const t=(o==="gasto"?d:c).find(e=>e.id===s);if(t){if(o==="gasto"){m.style.display="flex";const e=document.querySelector(".mensaje-error-gasto");e&&e.remove(),L.value=t.nombre,I.value=t.cantidad,f=s;const n=document.querySelector("#btn-submit");n.textContent="Guardar Cambios"}else if(o==="ingreso"){S.value=t.cantidad,f=s;const e=document.querySelector("#btn-submit-ingreso")||b.querySelector('button[type="submit"]');e&&(e.textContent="Guardar Cambios")}}}function P(s,o){if(o==="gasto"){const r=d.find(t=>t.id===s);if(!r)return;if(a+=r.cantidad,x.textContent=`$${a}`,d=d.filter(t=>t.id!==s),N(),v(d),p("Gasto eliminado",j,"exito"),a>0){m.style.display="flex";const t=document.querySelector(".mensaje-error-gasto");t&&t.remove()}y()}else if(o==="ingreso"){const r=c.find(n=>n.id===s);if(!r)return;const t=d.reduce((n,i)=>n+Number(i.cantidad),0),e=l-r.cantidad;if(e<t){p("No puedes eliminar este ingreso, supera los gastos actuales",T,"error");return}l=e,a=l-t,C.textContent=`$${l}`,x.textContent=`$${a}`,y(),c=c.filter(n=>n.id!==s),w(),E(c),p("Ingreso eliminado",A,"exito")}}function M(){return Math.random().toString(36).substring(2)+Date.now()}function R(){localStorage.removeItem("gastos"),localStorage.removeItem("ingresos"),location.reload()}function y(){if(d.length>=1&&c.length>=1&&(a<=0||a===0)){if(!document.querySelector(".mensaje-error-gasto")){const o=document.createElement("div");o.classList.add("bg-red-500","border-red-800","px-2","rounded","my-2","mensaje-error-gasto");const r=document.createElement("p");r.classList.add("text-white","text-center"),r.textContent="No puedes gastar mas dinero, aumenta tu presupuesto",o.appendChild(r),G.appendChild(o)}m.style.display="none",p("Excediste tu presupuesto",G,"error")}}
